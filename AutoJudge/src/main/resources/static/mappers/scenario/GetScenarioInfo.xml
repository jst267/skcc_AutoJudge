<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="GetScenarioInfo">
	<select id="getScenarioList" resultType="java.util.HashMap" parameterType="java.util.HashMap">
		SELECT FAB_ID,
		       AREA_ID,
		       EQP_GRP,
		       EQP_ID,
		       ALARM_ID,
		       SNRO_ID,
		       SNRO_NM,
		       AUTO_FLAG,
		       CRT_TM,
		       CRT_USER_ID,
		       CHG_TM,
		       CHG_USER_ID			   
		  FROM BIZ_AJSNROMAPPING_INF
	   	 WHERE FAB_ID = #{FAB_ID}
		   AND AREA_ID = #{AREA_ID}
		   <if test='EQP_GRP != null and !EQP_GRP.equals("none")' >
		  	 AND EQP_GRP = #{EQP_GRP}
		   </if>
		   
		   <if test='EQP_ID != null and !EQP_ID.equals("none")' >
		  	 AND EQP_ID = #{EQP_ID}
		   </if>
	</select>
	
	<select id="getEqpGrpListForSNROCNT" resultType="java.util.HashMap" parameterType="java.util.HashMap">
		SELECT FAB_ID,
		       AREA_ID,
		       EQP_GRP,
		       SNRO_LIST,
		       SNRO_CNT   
		  FROM BIZ_AJGRPSNRO_INF
	   	 WHERE FAB_ID = #{FAB_ID}
	   	   <if test='AREA_ID != null and !AREA_ID.equals("none")' >
		   	AND AREA_ID = #{AREA_ID}
		   </if>
		   <if test='EQP_GRP != null and !EQP_GRP.equals("none")' >
		   	AND EQP_GRP = #{EQP_GRP}
		   </if>
	</select>
	
	<select id="getScenarioFromEqpGrp" resultType="java.util.HashMap" parameterType="java.util.HashMap">
		SELECT SNRO_ID,
		       SNRO_NM,
		       SNRO_DESC,
		       TRY_LIMIT_CNT   
		  FROM BIZ_SCENARIO_INF
	   	 WHERE FAB_ID = #{FAB_ID}
		   	AND AREA_ID = #{AREA_ID}
		   	AND SNRO_ID = #{SNRO_ID}
	</select>
	
	<select id="getAllScenarioList" resultType="java.util.HashMap" parameterType="java.util.HashMap">
		SELECT SNRO_ID,
		       SNRO_NM,
		       SNRO_DESC,
		       TRY_LIMIT_CNT   
		  FROM BIZ_SCENARIO_INF
	   	 WHERE FAB_ID = #{FAB_ID}
		   	AND AREA_ID = #{AREA_ID}
		   	
		   	<choose>
            <when test="SNRO_ID.size != 0">
                AND SNRO_ID NOT IN 
                <foreach collection="SNRO_ID" item="item" index="index" separator="," open="(" close=")">
                    #{item}
                </foreach>
            </when>
        </choose>
	</select>
</mapper>